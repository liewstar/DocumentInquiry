import{_ as V,u as B,a as x,r as f,c as g,o as R,b as o,d as u,e as r,f as i,w as n,g as d,E as z,h as T,i as S,j as l,t as p,k as y,F,l as L,m as P,n as j,p as q,q as J}from"./index-fc1162dd.js";const M={class:"detail-container"},O={class:"detail-header"},U={key:1,class:"error-content"},A={key:2,class:"detail-content"},G={class:"card-header"},H={class:"detail-title"},K={class:"detail-meta-tags"},Q={class:"detail-document"},W={key:0,class:"document-content"},X={class:"document-text"},Y={class:"detail-actions"},Z={__name:"DetailView",setup(ee){const h=B();x();const w=f(!1),s=f(null),_=f(null);g(()=>{const e=h.params.id;if(!e)return null;try{return decodeURIComponent(e)}catch(t){return console.error("ID解码失败:",t),e}}),R(()=>{try{const e=sessionStorage.getItem("wenshu_detail");if(e){s.value=JSON.parse(e),console.log("从sessionStorage获取文书数据:",s.value);return}}catch(e){console.error("从sessionStorage获取数据失败:",e)}if(history.state&&history.state.wenshuItem){s.value=history.state.wenshuItem,console.log("从路由state获取文书数据:",s.value);return}_.value={title:"数据丢失",message:"无法获取文书详情，请返回列表页重新选择",icon:"warning"},console.warn("未找到文书数据，可能是直接访问了详情页或刷新了页面")});const D=g(()=>!s.value||!s.value.content?[]:s.value.content.split(/\n+/).filter(e=>e.trim().length>0)),b=e=>{if(!e)return"未知";let t="未知";try{if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}/)){const c=e.split("T")[0].split("-");if(c.length===3)return t=`${c[0]}年${c[1]}月${c[2]}日`,t}const a=new Date(e);return isNaN(a.getTime())?e:a.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})}catch(a){return console.error("日期格式化错误:",a),e}},E=()=>{window.print()};return(e,t)=>{const a=z,c=q,C=T,v=P,$=j,k=J,N=S;return o(),u("div",M,[r("div",O,[i(a,{onClick:t[0]||(t[0]=m=>e.$router.back()),icon:"Back",type:"primary",plain:""},{default:n(()=>t[3]||(t[3]=[l("返回列表")])),_:1,__:[3]})]),w.value?(o(),d(c,{key:0,rows:10,animated:""})):_.value?(o(),u("div",U,[i(C,{icon:_.value.icon||"error",title:_.value.title,"sub-title":_.value.message},{extra:n(()=>[i(a,{type:"primary",onClick:t[1]||(t[1]=m=>e.$router.push("/"))},{default:n(()=>t[4]||(t[4]=[l("返回搜索")])),_:1,__:[4]})]),_:1},8,["icon","title","sub-title"])])):s.value?(o(),u("div",A,[i(N,{class:"detail-card"},{default:n(()=>[r("div",G,[r("h1",H,p(s.value.title||"无标题文书"),1),r("div",K,[s.value.case_number?(o(),d(v,{key:0,size:"large",effect:"plain"},{default:n(()=>[l("案号: "+p(s.value.case_number),1)]),_:1})):y("",!0),s.value.cause?(o(),d(v,{key:1,size:"large",type:"success",effect:"plain"},{default:n(()=>[l("案由: "+p(s.value.cause),1)]),_:1})):y("",!0),s.value.publish_date?(o(),d(v,{key:2,size:"large",type:"info",effect:"plain"},{default:n(()=>[l("发布日期: "+p(b(s.value.publish_date)),1)]),_:1})):y("",!0)])]),i($,{"content-position":"center"},{default:n(()=>t[5]||(t[5]=[l("文书内容")])),_:1,__:[5]}),r("div",Q,[s.value.content?(o(),u("div",W,[r("div",X,[(o(!0),u(F,null,L(D.value,(m,I)=>(o(),u("p",{key:I,class:"content-paragraph"},p(m),1))),128))])])):(o(),d(k,{key:1,description:"暂无文书内容"}))])]),_:1}),r("div",Y,[i(a,{type:"primary",onClick:t[2]||(t[2]=m=>e.$router.push("/"))},{default:n(()=>t[6]||(t[6]=[l("返回搜索")])),_:1,__:[6]}),i(a,{type:"success",onClick:E,icon:"Printer"},{default:n(()=>t[7]||(t[7]=[l("打印文书")])),_:1,__:[7]})])])):(o(),d(k,{key:3,description:"未找到文书信息"}))])}}},se=V(Z,[["__scopeId","data-v-91d584b6"]]);export{se as default};
